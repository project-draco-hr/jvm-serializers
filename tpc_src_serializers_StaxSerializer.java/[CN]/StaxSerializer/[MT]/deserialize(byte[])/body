{
  XMLStreamReader parser=inFactory.createXMLStreamReader(new ByteArrayInputStream(array));
  searchTag(parser,"mc");
  MediaContent content=new MediaContent(readMedia(parser));
  if (parser.nextTag() != XMLStreamConstants.START_ELEMENT) {
    throw new IllegalStateException("Expected <im>, no START_ELEMENT encountered but " + parser.getEventType());
  }
  do {
    if (!"im".equals(parser.getLocalName())) {
      throw new IllegalStateException("Expected <im>, got <" + parser.getLocalName() + ">");
    }
    content.addImage(readImage(parser));
  }
 while (parser.nextTag() == XMLStreamConstants.START_ELEMENT);
  if (!"mc".equals(parser.getLocalName())) {
    throw new IllegalStateException("Expected closing </mc>, got </" + parser.getLocalName() + ">");
  }
  parser.close();
  return content;
}
