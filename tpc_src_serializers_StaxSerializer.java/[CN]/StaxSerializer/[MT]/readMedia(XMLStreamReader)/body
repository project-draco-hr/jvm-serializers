{
  Media media=new Media();
  media.setPlayer(Player.valueOf(readElement(parser,FIELD_NAME_PLAYER)));
  media.setUri(readElement(parser,FIELD_NAME_URI));
  media.setTitle(readElement(parser,FIELD_NAME_TITLE));
  media.setWidth(Integer.parseInt(readElement(parser,FIELD_NAME_WIDTH)));
  media.setHeight(Integer.parseInt(readElement(parser,FIELD_NAME_HEIGHT)));
  media.setFormat(readElement(parser,FIELD_NAME_FORMAT));
  media.setDuration(Long.parseLong(readElement(parser,FIELD_NAME_DURATION)));
  media.setSize(Long.parseLong(readElement(parser,FIELD_NAME_SIZE)));
  media.setBitrate(Integer.parseInt(readElement(parser,FIELD_NAME_BITRATE)));
  searchTag(parser,FIELD_NAME_PERSONS);
  do {
    media.addToPerson(parser.getElementText());
  }
 while (parser.nextTag() == XMLStreamConstants.START_ELEMENT && FIELD_NAME_PERSONS.equals(parser.getLocalName()));
  if (!"md".equals(parser.getLocalName())) {
    throw new IllegalStateException("Expected closing </md>, got </" + parser.getLocalName() + ">");
  }
  return media;
}
